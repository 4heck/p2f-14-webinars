# Changelog

## Что такое лог изменений?
Лог изменений – это файл, который содержит поддерживаемый, хронологически упорядоченный список изменений для каждой версии проекта.

## Зачем вести лог изменений?
Чтобы пользователям и контрибьюторам было проще точно понять, какие изменения были сделаны в каждом релизе (или версии) проекта

## Кому нужен лог изменений?
Людям. Будь то клиенты или разработчики, конечные пользователи программного обеспечения это люди, и им важно, с чем они работают. Когда программное обеспечение меняется, люди хотят знать почему и что изменилось.

## Как мне сделать хороший лог изменений?
### Главные принципы
- Лог изменений ведётся для людей, не для машин.
- Для каждой версии должен быть отдельный раздел.
- Одинаковые типы изменений должны быть сгруппированы.
- Должна быть возможность поставить ссылку на любую версию или раздел.
- Последняя версия должна идти в начале файла.
- У каждой версии указана дата выпуска.
- Уточните, следуете ли вы принципам Семантического версионирования

### Типы изменений
- `Добавлено` для новых функций.
- `Изменено` для изменений в существующей функциональности.
- `Устарело` для функций, которые скоро будут удалены.
- `Удалено` для удалённых функций.
- `Исправлено` для любых исправлений.
- `Безопасность` в случае уязвимостей.


![Changelog Example](images/changelog.png)

## Как мне тратить меньше усилий на ведение лога изменений?
Ведите раздел `Новое` с изменениями для новой версии в начале файла.
Это нужно для двух вещей:
- Люди смогут видеть, каких изменений им ожидать в ближайших релизах
- В момент релиза вы можете переместить изменения раздела `Новое` в раздел нового релиза.

## Бывают плохие логи изменений?
Да. Вот несколько способов чтобы сделать их не такими полезными.

### Диффы лога коммитов
Использование диффов лога коммитов это плохая идея: они очень шумные. Шумят мердж-коммиты, коммиты с непонятными названиями, изменения в документации и тому подобное. Назначение коммита в том, чтобы задокументировать шаг в эволюции исходного кода. В некоторых проектах следят за историей коммитов, в некоторых нет. Назначение же раздела в логе изменений — задокументировать ключевые различия, часто между несколькими коммитами, чтобы ясно донести их назначение до конечных пользователей.

### Игнорирование устаревающих функций
Когда люди обновляются с одной версии на другую, должно быть до боли очевидно, что сломается. Должна быть возможность обновиться до версии, которая перечисляет устаревающие функции, удалить устаревшие данные, затем обновиться до версии, в которой устаревающие функции становятся удалёнными. Если вы не ведёте лог изменений, то хотя бы указывайте в нём устаревающие и удалённые функции, а также все критичные изменения.

### Непонятные даты
В США сначала пишут месяц (`06-02-2012` для 2 июня 2012), в то время как большинство людей в остальном мире пишут роботоподобное `2 июня 2012`, произнося эту дату по-разному. Запись `2012-06-02` логично идёт от большего к меньшему, не пересекается с большинством других форматов дат, и является стандартом ISO. Поэтому именно такой формат рекомендуется для логов изменений.

## Часто задаваемые вопросы
### Существует ли стандарт формата логов изменений?
На самом деле нет. Есть стайлгайд логов изменений GNU, есть длиной-в-два-параграфа файл "guideline" GNU NEWS. Оба или неадекватны или недостаточно полны.

### Как назвать файл лога изменений?
Назовите его `CHANGELOG.md`. Некоторые проекты также используют `HISTORY`, `NEWS` или `RELEASES`. Хоть и легко подумать, что имя файла лога изменений не так уж и важно, но зачем усложнять вашим конечным пользователям поиск места, где описаны все ключевые изменения?

### Что насчёт функции "Релизы" на Гитхабе/Гитлабе?
Это отличная инициатива. Релизы могут использоваться для превращения простых тегов в Git (например, тег v1.0.0) в подробные заметки к релизам с помощью их редактирования вручную, или с помощью комментариев к таким тегам. Релизы на Гитхабе создают непереносимый лог изменений, который может быть показан пользователям только на самом Гитхабе. Возможно вести их в формате, близком к формату проекта Keep a Changelog, но это требует больших усилий. Текущая версия Релизов на Гитхабе также возможно не так хорошо видна для конечных пользователей, в отличие от обычных файлов с именами в верхнем регистре (`README`, `CONTRIBUTING` и так далее). Другая небольшая проблема заключается в том, что интерфейс не предлагает ссылок на логи коммитов между релизами.

### Могут ли логи изменений быть автоматически распарсены?
Это сложно, потому что люди следуют сильно различающимся форматам и используют разные имена файлов. Vandamme это гем для Руби, созданный командой Gemnasium, который парсит многие (но не все) логи изменений проектов с открытым исходным кодом.

### Что насчёт yanked-релизов?
Yanked-релизы – это версии, которые изымаются из обращения из-за серьёзного бага или проблемы безопасности в них. Часто такие версии даже не упоминаются в логах изменений. А должны. И вот как вам следует их упоминать:
```
## 0.0.5 - 2014-12-13 [YANKED]
```
Тег [YANKED] так бросается в глаза специально. Очень важно, чтобы люди его заметили. Так как он обрамлён квадратными скобками, его также проще распарсить программно.

### Имеет ли смысл переписывать лог изменений?
Конечно. Всегда есть веские причины для улучшения лога изменений. Я регулярно открываю пулл-реквесты по добавлению недостающих релизов в проекты с открытым исходным кодом с брошенными логами изменений. Также возможно вы можете обнаружить, что вы забыли указать критичное изменение в замечаниям к версии. В этом случае очевидно вам важно обновить ваш лог изменений.